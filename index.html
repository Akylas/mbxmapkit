---
layout: pages
category: overview
title: MBXMapKit
navigation:
- title: Installation
  hash: installation
- title: Why use MBXMapKit?
  hash: why_use_mbxmapkit
- title: API overview
  hash: api_overview
  items:
  - text: MBXRasterTileOverlay.h
    hash: mbxrastertileoverlay
  - text: MBXOfflineMapDownloader.h
    hash: mbxofflinemapdownloader
  - text: MBXOfflineMapDatabase.h
    hash: mbxofflinemapdatabase
  - text: MBXPointAnnotation.h
    hash: mbxpointannotation
  - text: MBXConstantsAndTypes.h
    hash: mbxconstantsandtypes
  - text: MBXMapKit.h
    hash: mbxmapkit
---

<!-- =================================================== -->
<!-- = Pure-css wireframe phone on top of a static map = -->
<!-- =================================================== -->
<div class='row6 contain fill-grey round-top clip clearfix keyline-all'>
  <div id='map' class='row6 round-top col12 pin-top'></div>

  <div class='round-top mask-top pin-top row3 col12 fill-lighten3'></div>
  <div class='mask-left pin-bottom row3 col4 fill-lighten3'></div>
  <div class='mask-right pin-bottom row3 col4 fill-lighten3'></div>

  <div class='z1 contain'>
    <div class='pad2y center'>
      <h2>Raster maps for iOS 7+</h2>
    </div>

    <div class='wireframe z1 contain clip mobile-splash col4 margin4'>
      <div class='keyline-bottom center pad2y fill-white'>
        <span class='dot fill-darken1'></span>
      </div>
      <div class='body col12 row4'>
      </div>
    </div>
  </div>
</div>
<script>
var map = L.mapbox.map('map', 'examples.map-i87786ca', {
  zoomControl: false,
  infoControl: false
}).setView([38.9209, -77.0263], 15);
</script>


<!-- =========== -->
<!-- = Tagline = -->
<!-- =========== -->
<div class='space-bottom2 pad2 quiet keyline-bottom keyline-left keyline-right fill-white prose round-bottom center clearfix'>
  <div class='col10 margin1'>
    <p>
    A small <a href='https://github.com/mapbox/mbxmapkit/blob/master/CHANGELOG.md'>open source</a> library
    which adds Mapbox raster map support to apps built with the MapKit framework on iOS 7+.
    </p>
  </div>
</div>


<!-- =========== -->
<!-- = Install = -->
<!-- =========== -->
<div id='installation' class='keyline-all fill-darken0 space-bottom round'>

  <div class='pad1y pad2x keyline-bottom strong small clearfix round-top'>
    <!-- This is the two-tone "MBXMapKit|version" badge which requires zero whitespace between tags -->
    <div class='fr'><span
        class='fill-darken1 pad1x round-left dark inline'>MBXMapKit</span><a
        class='pad1x inline round-right keyline-left quiet dark fill-darken2'
        href='https://github.com/mapbox/mbxmapkit/releases'>{{site.version}}</a>
    </div>
    Installation <em class='quiet'>Supports iOS versions 7.0+</em>
  </div>

  <div id='source' class='fill-white pad1y pad2x contain prose round-bottom'>
      <p>
      The full procedure to install from source is described in the MBXMapKit
      <a href="https://github.com/mapbox/mbxmapkit#installation">README</a> on GitHub.
      The condensed version is: copy a total of 11 source files from GitHub into your project, add the .m
      files to your build target, then link with the MapKit framework and libsqlite3.
      </p>
  </div>
</div>


<!-- ====================== -->
<!-- = Why use MBXMapKit? = -->
<!-- ====================== -->
<div class='prose pad2 doc round fill-white keyline-all space-bottom'>
  <h2 id='why_use_mbxmapkit'>Why use MBXMapKit?</h2>
  <p>
  In iOS 7, Apple made it much easier to use custom map tile overlays with the MapKit framework, as well as
  adding the ability to completely replace Apple's maps. MBXMapKit is a lightweight library which leverages
  these capabilities to help you build awesome apps with Mapbox raster maps. An important thing to understand
  is that you aren't limited to just picking "Do I want Mapbox Streets or Mapbox Satellite?". The mapbox.com
  map editor and TileMill provide many options for custom styling and incorporating your own data into maps
  hosted by Mapbox.
  </p>

<p>Here are some examples of what you can do with MBXMapKit:</p>

<ul>

<li>Use a custom styled Mapbox world basemap instead of Apple's basemap. If you've added POI markers to your
map with the mapbox.com map editor, MBXMapKit can fetch the marker metadata and icons and prepare custom point
annotations for you.</li>

<li>Create a transparent regional overlay (i.e. bring your own data) in TileMill, upload it to mapbox.com,
then display it as a raster tile overlay on top of the basemap of your choice.</li>

<li>Use MBXMapKit's offline map downloader to save regions from Mapbox maps onto your local storage for later
use when a reliable network connection is not available.</li>

<li>Use MBXMapKit tile overlays in combination with annotations and overlays from other sources, such as your
own API. As of version 0.3.0, MBXMapKit is very careful not to disrupt  MapKit's normal functionality, so in
general, what works with MapKit on its own should also work when you add MBXMapKit to the mix. If you find
that isn't the case, <a href="https://github.com/mapbox/mbxmapkit/issues/new">bug reports</a> are welcome.</li>
</ul>
</div>


<!-- ================ -->
<!-- = API Overview = -->
<!-- ================ -->
<div class='prose pad2 doc round fill-white keyline-all'>
  <h2 id='api_overview'>API overview</h2>
  <p>
  MBXMapKit extends Appleâ€™s MapKit framework to provide support for raster tile overlays and marker icons
  hosted by Mapbox. Rather than subclassing <code>MKMapView</code> itself, MBXMapKit provides subclass
  instances of Apple's <code>MKTileOverlay</code> and <code>MKShape</code> classes so you can use them with
  your own <code>MKMapView</code> according to Apple's MapKit API.  Also, MBXMapKit provides delegate callback
  notifications to help you smoothly make use of asynchronously loaded resources such as map metadata, marker
  icons, and offline maps.
  </p>

  <p>
  Full API documentation is available right in Xcode, either inline or in Xcode's Quick Help inspector. You
  can also run the provided <code>install_docs.sh</code> script, which leverages
  <a href="http://gentlebytes.com/appledoc/">appledoc</a> to create and install a documentation set into
  Xcode's documentation viewer.
  </p>

  <h3 id='mbxrastertileoverlay'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXRasterTileOverlay.h"
  >MBXRasterTileOverlay.h</a></h3>
    <p>
      <code>MBXRasterTileOverlay</code> is a subclass of <a
      href="https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKTileOverlay_class/Reference/Reference.html"
      >MKTileOverlay</a>, and it provides raster tile layers that you can initialize from a Mapbox
      map ID or an offline map database object. All network requests run through the <a
      href="https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/Classes/NSURLCache_Class/Reference/Reference.html"
      >NSURLCache</a> <code>sharedURLCache</code> for performance caching. <code>MBXRasterTileOverlay</code>
      provides automatic support for retina tiles and optional support for map metadata, map markers, and the
      Mapbox image quality API.
    </p>

    <p>
      <code>MBXRasterTileOverlayDelegate</code> provides callback notifications which allow you to update your
      MKMapView when MBXMapKit's asynchronously loaded map metadata and marker icons become available.
    </p>

  <h3 id='mbxofflinemapdownloader'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXOfflineMapDownloader.h"
  >MBXOfflineMapDownloader.h</a></h3>
    <p>
      <code>MBXOfflineMapDownloader</code> provides a mechanism for persistent storage and retrieval of
      offline map databases which contain all the files needed to present a specific map region while
      offline.
    </p>

    <p>
      The <code>MBXOfflineMapDownloaderDelegate</code> protocol provides callback notifications which allow
      you to track the progress of downloading a map region for offline use. Please note that
      requesting large map regions can result in very large numbers of map views for your Mapbox
      hosting plan. You may want to use the estimated file counts provided by
      <code>MBXOfflineMapDownloaderDelegate</code>, or some other mechanism of your own design, to impose
      limits on the size of the map regions your app will allow for offline use.
    </p>
    
    <p>
      It's important to understand that MBXMapKit makes the distinction between persistent storage and and
      performance caching, and <code>MBXOfflineMapDownloader</code> uses both of those for different purposes.
      For the performance caching part, tiles, metadata, and marker icons are downloaded through the
      <code>NSURLCache</code>'s <code>sharedURLCache</code>. The persistent storage part happens when the
      map data is written out to an sqlite database. For the purposes of Mapbox's Terms of
      Service, <code>MBXOfflineMapDownloader</code> implements an "offline cache", but the map data is 
      actually stored as a document to make sure it only gets removed <em>when you want it to be removed</em>.
      Separating cache and storage allows MBXMapKit to leverage <code>NSURLCache</code> without the risk
      of your offline map data disappearing at inopportune times. By default offline map data is excluded
      from iCloud backups, but that can be changed with a persistent global setting.</p>
    </p>
      
    <p>
      <code>MBXOfflineMapDownloader</code> stores offline map data in an sqlite schema which is designed to
      integrate smoothly with <code>MBXRasterTileOvlerlay</code> and which is not meant to be included in
      app bundles or otherwise shared. In the spirit of Mapbox's
      <a href="https://www.mapbox.com/tos/">terms of service</a> for offline caching,
      <code>MBXOfflineMapDownloader</code> provides access to offline maps at the level of instantiated
      <code>MBXOfflineMapDatabase</code> objects rather than giving direct access to the offline map data on
      disk.
    </p>

    <p>
      <strong>Caching policy:</strong> The Mapbox <a href="https://www.mapbox.com/tos/">terms of service</a>
      allow you to cache as much offline map data as you like for as long as you like, but you are not allowed
      to run a proxy or intermediate cache between Mapbox and devices, and you are not allowed to extract data
      from a device's "offline cache" and redistribute it.  Obviously these restrictions would be possible to
      circumvent, but please don't.  Our goal is to provide enough functionality in the offline map downloader
      that there isn't any need to bother about the low level details anyway. Feedback and suggestions are
      <a href="https://github.com/mapbox/mbxmapkit/issues/new">welcome</a>.
    </p>

  <h3 id='mbxofflinemapdatabase'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXOfflineMapDatabase.h"
  >MBXOfflineMapDatabase.h</a></h3>

    <p>
      <code>MBXOfflineMapDatabase</code> objects are used by <code>MBXRasterTileOverlay</code> to display
      offline maps. <code>MBXOfflineMapDatabase</code> instances provide access to disk storage which is
      managed by the internal implementation of <code>MBXOfflineMapDownloader</code>. Please refer to the
      public api of <code>MBXOfflineMapDownloader</code> for options to obtain offline map database objects
      and to remove offline map databases from disk.
    </p>


  <h3 id='mbxpointannotation'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXPointAnnotation.h"
  >MBXPointAnnotation.h</a></h3>

    <p>
      <code>MBXPointAnnotation</code> is a subclass of <a
      href="https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKShape_class/Reference/Reference.html"
      >MKShape</a> which implements the <a
      href="https://developer.apple.com/library/ios/documentation/mapkit/reference/mkannotation_protocol/Reference/Reference.html"
      >MKAnnotation</a> protocol. When <code>MBXRasterTileOverlay</code> loads maps which have markers, it can
      create an array of <code>MBXPointAnnotation</code> objects with the appropriate coordinates, titles, 
      subtitles, and Maki marker icons for you to use with your <code>MKMapView</code>.
    </p>


  <h3 id='mbxconstantsandtypes'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXConstantsAndTypes.h"
  >MBXConstantsAndTypes.h</a></h3>

    <p>
      <code>MBXConstantsAndTypes.h</code> provides the MBXMapKit version number, error codes, and image
      quality constants for use with <code>MBXRasterTileOverlay</code>.
    </p>


  <h3 id='mbxmapkit'><a
  href="https://github.com/mapbox/mbxmapkit/blob/master/MBXMapKit/MBXMapKit.h"
  >MBXMapKit.h</a></h3>

    <p>
      <code>MBXMapKit.h</code> includes all the other header files, and it provides a couple things which
      don't quite fit elsewhere: a category on <code>MKMapView</code> to center a map with a center coordinate
      and zoom level, and a property to override MBXMapKit's default user agent string.
    </p>
</div>
